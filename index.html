<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Will You Be My Valentine?</title>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Pacifico&display=swap" rel="stylesheet">
<style>
body{
    margin:0;
    padding:0;
    font-family:Arial, sans-serif;
    background: linear-gradient(135deg,#ff9a9e,#fad0c4);
    overflow:hidden;
    height:100vh;
}

/* CLICK TO START OVERLAY */
#overlay{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:linear-gradient(135deg,#ff758c,#ff7eb3);
    display:flex;
    justify-content:center;
    align-items:center;
    z-index:1000;
    flex-direction:column;
}

#overlay button{
    font-family:'Pacifico', cursive;
    font-size:50px;
    padding:30px 60px;
    border:none;
    border-radius:20px;
    background:linear-gradient(45deg,#ff4d6d,#ff7597);
    color:white;
    cursor:pointer;
    box-shadow:0 10px 20px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
}

/* Header */
#question{
    font-family:'Pacifico', cursive;
    font-size:48px;
    color:white;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
    text-align:center;
    margin-top:50px;
    z-index:1;
}

/* Buttons */
.yesBtn, #noBtn{
    position:absolute;
    border:none;
    border-radius:20px;
    font-size:22px;
    cursor:pointer;
    transition: all 0.3s ease;
    box-shadow:0 8px 15px rgba(0,0,0,0.2);
}

.yesBtn{
    padding:15px 30px;
    background:linear-gradient(45deg,#ff4d6d,#ff7597);
    color:white;
}

#noBtn{
    padding:22px 40px;
    background:linear-gradient(45deg,#555,#888);
    color:white;
}

/* Cupid + Arrow + Man */
#animationContainer{
    position: relative;
    width:100%;
    height:400px;
    margin-top:20px;
}

#cupid{
    position:absolute;
    left:50px;
    top:40%;
    width:150px;
    z-index:2;
}

#arrow{
    position:absolute;
    left:120px;
    top:50%;
    width:100px;
    transform:rotate(-10deg);
    z-index:3;
}

#man{
    position:absolute;
    right:100px;
    top:40%;
    width:150px;
    transition:all 0.2s ease;
    z-index:2;
}

/* LOVE LETTER */
#loveLetter{
    display:none;
    position:absolute;
    top:20%;
    left:50%;
    transform:translateX(-50%);
    width:420px;
    background:#fffaf0;
    border:2px solid #ff4d6d;
    border-radius:20px;
    padding:40px 30px;
    box-shadow:0 15px 30px rgba(0,0,0,0.25);
    text-align:left;
    font-size:20px;
    line-height:1.8;
    font-family:'Dancing Script', 'Pacifico', cursive;
    color:#b3003b;
    z-index:10;
    animation: unfold 1s forwards;
}

#loveLetter h2{
    text-align:center;
    font-size:32px;
    margin-bottom:25px;
    color:#ff3366;
    letter-spacing:2px;
}

#loveLetter p{
    margin:12px 0;
    font-size:20px;
    text-shadow:1px 1px 1px rgba(255,77,109,0.3);
}

@keyframes unfold{
    0%{transform:translateX(-50%) scaleY(0);}
    100%{transform:translateX(-50%) scaleY(1);}
}
</style>
</head>
<body>

<!-- CLICK TO START OVERLAY -->
<div id="overlay">
    <button id="startBtn">CLICK TO START</button>
</div>

<h1 id="question">Will you be my Valentine? ‚ù§Ô∏è</h1>

<div id="animationContainer">
    <img id="cupid" src="cupid.png" alt="Cupid">
    <img id="arrow" src="arrow.png" alt="Arrow">
    <img id="man" src="man1.png" alt="Man">
</div>

<div id="loveLetter">
    <h2>üíå Your Love Letter üíå</h2>
    <!-- Image of the place -->
    <div style="text-align:center; margin-bottom:20px;">
        <img src="lk_bakery.jpg" alt="LK Bakery" style="width:80%; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,0.2);">
    </div>
    <p><strong>Where:</strong> LK Bakery</p>
    <p><strong>With who:</strong> Me üòâ</p>
    <p><strong>When:</strong> Feb 14 (TBD)</p>
    <p><strong>What we eat:</strong> Croissants and other sweets ü•êüç∞</p>
    <p><strong>Activities:</strong> TBD</p>
    <p><strong>Why:</strong> Because why not üòè</p>
</div>

<button id="yesBtn0" class="yesBtn" style="left:40%; top:60%">YES</button>
<button id="noBtn" style="left:55%; top:60%">NO</button>

<!-- Sounds -->
<audio id="yesSound" src="yes.mp3"></audio>
<audio id="noSound" src="no.mp3"></audio>
<audio id="bgMusic" src="music.mp3" loop></audio>
<audio id="hitSound" src="hit.mp3"></audio>

<!-- Netlify form (auto-submitted) -->
<form name="valentine-response" method="POST" data-netlify="true" hidden>
    <input type="hidden" name="form-name" value="valentine-response">
    <input type="hidden" name="response" value="YES">
</form>

<script>
let overlay = document.getElementById("overlay");
let startBtn = document.getElementById("startBtn");

let yesButtons = [document.getElementById("yesBtn0")];
let noBtn = document.getElementById("noBtn");
let question = document.getElementById("question");
let loveLetter = document.getElementById("loveLetter");

let cupid = document.getElementById("cupid");
let arrow = document.getElementById("arrow");
let man = document.getElementById("man");

let yesSound = document.getElementById("yesSound");
let noSound = document.getElementById("noSound");
let bgMusic = document.getElementById("bgMusic");
let hitSound = document.getElementById("hitSound");

let yesSize = 1;
let maxYes = 8;

/* ------------------ ARROW ANIMATION ------------------ */
let arrowLeft = 120;
let manHit = false;

function startCupidAnimation(){
    man.src = "man1.png";
    arrow.style.display = "block";
    arrowLeft = 120;
    manHit = false;

    setTimeout(()=>{
        let start = null;
        let duration = 1000;

        function animate(timestamp){
            if(!start) start = timestamp;
            let progress = timestamp - start;
            let screenWidth = window.innerWidth;
            arrowLeft = 120 + (screenWidth - 220) * (progress/duration);
            arrow.style.left = arrowLeft + "px";

            let arrowRect = arrow.getBoundingClientRect();
            let manRect = man.getBoundingClientRect();
            if(!manHit && (arrowRect.right >= manRect.left + manRect.width*0.3)){
                man.src = "man_hit.png";
                manHit = true;
                hitSound.currentTime = 0;
                hitSound.play();
            }

            if(progress < duration){
                requestAnimationFrame(animate);
            } else {
                arrow.style.display = "none";
            }
        }
        requestAnimationFrame(animate);
    },3000);
}

/* ------------------ SUCCESS ACTION ------------------ */
function successAction(){
    yesSound.play();
    question.style.display = "none";
    noBtn.style.display = "none";
    yesButtons.forEach(b=>b.style.display="none");

    bgMusic.volume=0.5; 
    bgMusic.play();

    startCupidAnimation();

    // show love letter after arrow animation
    setTimeout(()=>{
        loveLetter.style.display="block";
    }, 4000);

    // Auto-submit Netlify form via fetch
    const form = document.forms["valentine-response"];
    const data = new FormData(form);
    fetch("/", {method:"POST", body:data})
      .then(()=>console.log("Response submitted to Netlify!"))
      .catch(err=>console.error("Submission error:", err));
}

yesButtons[0].onclick = successAction;

/* ------------------ CREATE YES BUTTONS ------------------ */
function createYes(){
    if(yesButtons.length >= maxYes) return;
    let b = document.createElement("button");
    b.innerText = "YES";
    b.className = "yesBtn";
    b.style.left = Math.random()*window.innerWidth + "px";
    b.style.top = Math.random()*window.innerHeight + "px";
    b.onclick = successAction;
    document.body.appendChild(b);
    yesButtons.push(b);
}

/* ------------------ NO CLICK ------------------ */
noBtn.onclick = ()=>{
    noSound.play();

    let x,y,safe=false;
    while(!safe){
        x = Math.random()*(window.innerWidth-180);
        y = Math.random()*(window.innerHeight-120);
        safe = true;
        let rectQ = question.getBoundingClientRect();
        if(!(x+180<rectQ.left || x>rectQ.right || y+50<rectQ.top || y>rectQ.bottom)) safe=false;
        yesButtons.forEach(btn=>{
            let r = btn.getBoundingClientRect();
            if(!(x+180<r.left || x>r.right || y+50<r.top || y>r.bottom)) safe=false;
        });
    }
    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";

    yesSize += 0.6;
    yesButtons.forEach(b=>b.style.transform=`scale(${yesSize})`);

    createYes();
};

/* ------------------ START BUTTON ------------------ */
startBtn.onclick = ()=>{
    overlay.style.display="none";
    bgMusic.volume = 0.5;
    bgMusic.play();
};
</script>

</body>
</html>
